<!doctype html><html lang="ja"><head>
<meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>4段階愛着診断（第1段階20問デモ）</title>
<style>
:root{--rose50:#fff1f2;--rose100:#ffe4e6;--rose200:#fecdd3;--rose300:#fda4af;--rose400:#fb7185;--rose500:#f43f5e;--rose600:#e11d48;--text:#7f1d1d}
*{box-sizing:border-box}body{margin:0;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica,Arial,"Hiragino Kaku Gothic ProN","Yu Gothic",Meiryo,ui-sans-serif;color:var(--text);background:linear-gradient(#fff,#fff5f6)}
.wrap{max-width:860px;margin:24px auto;padding:20px}.h1{font-weight:800;font-size:28px;color:var(--rose600);text-align:center;margin:8px 0 4px}
.muted{color:#9f1239;text-align:center;font-size:12px;margin-bottom:12px}
.card{background:#fff;border:1px solid var(--rose200);border-radius:16px;padding:16px;box-shadow:0 1px 6px rgba(244,63,94,.08)}
.row{display:flex;gap:12px;align-items:center;justify-content:space-between}
.bar{height:8px;background:var(--rose100);border-radius:999px;overflow:hidden}.bar>div{height:8px;background:var(--rose400)}
.q{font-weight:700;margin:6px 0 12px}.choice{border:1px solid var(--rose200);border-radius:12px;padding:10px 12px;text-align:left;background:#fff;cursor:pointer}
.choice:hover{border-color:var(--rose300)}.choice.sel{border-color:var(--rose400);background:var(--rose50)}
.btn{border:none;border-radius:12px;padding:10px 16px;font-weight:700;color:#fff;background:var(--rose500);cursor:pointer}.btn:disabled{background:var(--rose300);cursor:not-allowed}
.btn-ghost{background:#fff;color:var(--rose600);border:1px solid var(--rose200)}.grid2{display:grid;grid-template-columns:1fr 1fr;gap:12px}@media(max-width:640px){.grid2{grid-template-columns:1fr}}
</style></head><body><div class="wrap">
<div class="h1">4段階愛着診断</div><div class="muted">スクショ保存OK。途中でやめても再開できます（第1段階デモ20問）。</div>
<div id="app"></div></div>
<script>
const QUESTIONS=[{stem:"過去の恋愛で、好きな人からの返信が遅かったとき、どうしていましたか？",choices:[["A","何度もLINEを送ってしまった"],["B","『なんで返信してくれないの？』と問い詰めた"],["C","平気を装ったが内心は不安でいっぱい"],["D","忙しいんだろうなと落ち着いて待てた"]]}, {stem:"相手がSNSを更新しているのに自分への返信がなかったとき、どうしていましたか？",choices:[["A","『私だけ無視？』と不安になった"],["B","わざと未読無視して距離を置いた"],["C","気にしないふりをしたが落ち込んだ"],["D","たまたまそういうこともあると流せた"]]}, {stem:"デート中に相手がスマホをよく見ていたとき、どう反応しましたか？",choices:[["A","『飽きたのかな』と不安になった"],["B","自分もスマホを見て距離を取った"],["C","笑顔でごまかしたが心は傷ついた"],["D","仕事かもと冷静に受け止めた"]]}, {stem:"相手が『今日は疲れてる』とそっけなかったとき、どうしていましたか？",choices:[["A","『嫌われた？』と不安が爆発"],["B","こちらも冷たく返して距離を作った"],["C","我慢して笑顔、心では孤独"],["D","休ませてあげようと受け止めた"]]}, {stem:"相手が予定を優先して会えなかったとき、あなたは？",choices:[["A","『私より予定が大事？』と不安に"],["B","『じゃあ私も自由に』と突き放した"],["C","表面は『大丈夫』と言いながら落ち込んだ"],["D","次に会える日を楽しみにできた"]]}, {stem:"相手が他の異性と楽しそうに話していたとき、あなたは？",choices:[["A","『取られるかも』と強い不安"],["B","自分も他の人と距離を縮めた"],["C","何も言えず笑顔でごまかした"],["D","信頼して気にしなかった"]]}, {stem:"相手からの返信が短文で冷たかったとき、あなたは？",choices:[["A","『嫌われた？』と不安に"],["B","自分もわざと短文で返した"],["C","明るく返したが落ち込んだ"],["D","疲れてるのかなと受け流せた"]]}, {stem:"相手が趣味や仕事を優先して自分が後回しにされたと感じたとき、どうしましたか？",choices:[["A","『大事じゃないのかな』と不安に"],["B","『勝手にして』と突き放した"],["C","応援したふりをしたが寂しかった"],["D","大事なことだし応援しようと思えた"]]}, {stem:"自分の気持ちを軽く流されたと感じたとき、どうしていましたか？",choices:[["A","『やっぱり伝わってない』と強い不安"],["B","それ以上話さず心を閉ざした"],["C","笑ってごまかしたが心に残った"],["D","タイミングを変えて話そうと思えた"]]}, {stem:"相手から『一人の時間が欲しい』と言われたとき、あなたは？",choices:[["A","『もう嫌われた？』と不安が爆発"],["B","『じゃあ私も好きにする』と距離"],["C","表面は『わかった』と言い内心は寂しい"],["D","理解して落ち着いて待てた"]]}, {stem:"相手が友達との予定を優先したとき、あなたは？",choices:[["A","『私より友達？』と拗ねた"],["B","自分も別の予定を入れて距離"],["C","『大丈夫』と言いながら寂しさを抱えた"],["D","『友達も大事だよね』と理解"]]}, {stem:"相手が誕生日や記念日を忘れていたとき、あなたは？",choices:[["A","『大事にされてない』と泣いた/怒った"],["B","『もう冷めた』と突き放した"],["C","平気なふりをしたが傷ついた"],["D","忙しかったのかもと受け止めた"]]}, {stem:"相手が急に連絡を減らしてきたとき、あなたは？",choices:[["A","不安で追いLINEした"],["B","自分も連絡を減らして距離"],["C","何も言えず待ち続けた"],["D","事情があるかもと冷静に考えた"]]}, {stem:"相手の態度が冷たくなったと感じたとき、どうしましたか？",choices:[["A","何度も理由を聞いて確認"],["B","『もういい』と突き放した"],["C","普通に振る舞ったが心は乱れた"],["D","タイミングを見て冷静に話し合い"]]}, {stem:"相手が自分の不安を『考えすぎ』と言ったとき、あなたは？",choices:[["A","さらに不安になって食い下がった"],["B","それ以上言わず黙った"],["C","『平気』と笑ったが傷ついた"],["D","『そうかも』と受け止め冷静に"]]}, {stem:"未読・既読スルーされたとき、どうしていましたか？",choices:[["A","送り直したり電話した"],["B","『もう知らない』と突き放した"],["C","平気なふりで返事を待った"],["D","忙しいと捉えて落ち着いて待てた"]]}, {stem:"相手が元恋人の話をしたとき、あなたは？",choices:[["A","『まだ好き？』と問い詰めた"],["B","不機嫌になり距離を取った"],["C","平気を装いながらモヤモヤ"],["D","昔の話だと冷静に受け止めた"]]}, {stem:"自分が体調不良のとき相手が心配してくれなかったら？",choices:[["A","『大事にされてない』と泣いた"],["B","『期待しない』と突き放した"],["C","笑顔を作って我慢した"],["D","事情があるのかもと受け流した"]]}, {stem:"気持ちを素直に伝えたら軽く流されたとき、あなたは？",choices:[["A","『やっぱりダメ』と不安が強まる"],["B","『もういい』と心を閉ざした"],["C","表面は笑って内心は落ち込んだ"],["D","今はタイミングじゃないと受け止めた"]]}, {stem:"相手の言動から『本当に愛されてる？』と不安になったとき、あなたは？",choices:[["A","確かめたくて何度も聞いた"],["B","不安を隠して冷たい態度を取った"],["C","何も言えずモヤモヤを抱えた"],["D","信頼して気持ちを落ち着けられた"]]}];
const KEY="attch_demo_v1";let idx=0;let answers=JSON.parse(localStorage.getItem(KEY)||"[]");const app=document.getElementById("app");
function render(){app.innerHTML="";const total=QUESTIONS.length;const prog=document.createElement("div");prog.className="card";prog.innerHTML=`<div class="row" style="margin-bottom:8px;font-size:12px;color:#9f1239;"><div>第1段階（過去の自分）</div><div>${Math.min(idx+1,total)}/${total}（${Math.round(((Math.min(idx,total))/total)*100)}%）</div></div><div class="bar"><div style="width:${Math.round((idx/total)*100)}%"></div></div>`;app.appendChild(prog);if(idx>=total){return renderResult();}
const q=QUESTIONS[idx];const card=document.createElement("div");card.className="card";const selected=answers[idx]||null;card.innerHTML=`<div class="q">${q.stem}</div><div id="choices"></div><div class="row" style="margin-top:12px;"><button class="btn-ghost" ${idx===0?"disabled":""} id="prev">戻る</button><button class="btn" id="next" ${selected?"":"disabled"}>${idx+1===total?"結果を見る":"次へ"}</button></div>`;app.appendChild(card);
const box=card.querySelector("#choices");q.choices.forEach(([id,label])=>{const b=document.createElement("button");b.className="choice"+(selected===id?" sel":"");b.textContent=label;b.onclick=()=>{answers[idx]=id;localStorage.setItem(KEY,JSON.stringify(answers));render();};box.appendChild(b);});
card.querySelector("#prev").onclick=()=>{if(idx>0){idx--;render();}};card.querySelector("#next").onclick=()=>{if(!answers[idx])return;idx++;render();};}
function renderResult(){let an=0,av=0,fe=0,se=0;answers.forEach(c=>{if(c==="A")an++;else if(c==="B")av++;else if(c==="C")fe++;else if(c==="D")se++;});const total=answers.length||1;const pct=v=>Math.max(0,Math.min(100,Math.round(v/total*100)));const wrap=document.createElement("div");wrap.className="card";const stylePct={anxious:pct(an),avoidant:pct(av),fearful:pct(fe),secure:pct(se)};const entries=Object.entries(stylePct).sort((a,b)=>b[1]-a[1]);const top=entries[0]?.[0]||"anxious";const summaryMap={anxious:"成長中の不安型。改善は進んでいるが、恋愛中は再燃しやすいタイプ。",avoidant:"距離を取りがちな回避型。自分のペースを守りつつ、対話の練習が鍵。",fearful:"近づきたいのに怖い恐れ回避型。安心感の土台づくりが最優先。",secure:"安定型の傾向が強め。いまのやり方を継続するとさらに安定。"};
wrap.innerHTML=`<div class="h1" style="font-size:22px;margin:0 0 8px">診断結果</div><div class="grid2" style="margin:12px 0"><div class="card" style="border-color:var(--rose200)"><b>不安型</b>：${stylePct.anxious}%</div><div class="card" style="border-color:var(--rose200)"><b>回避型</b>：${stylePct.avoidant}%</div><div class="card" style="border-color:var(--rose200)"><b>恐れ回避型</b>：${stylePct.fearful}%</div><div class="card" style="border-color:var(--rose200)"><b>安定型</b>：${stylePct.secure}%</div></div><div class="card" style="border-color:var(--rose200);background:var(--rose50)">総合判定：${summaryMap[top]}</div><div class="row" style="margin-top:12px"><button class="btn-ghost" id="reset">最初からやり直す</button></div>`;app.appendChild(wrap);wrap.querySelector("#reset").onclick=()=>{localStorage.removeItem(KEY);idx=0;answers=[];render();};}
render();
</script></body></html>
